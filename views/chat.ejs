<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Incroyable chat</title>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Material+Icons">
        <link rel="stylesheet" href="https://unpkg.com/bootstrap-material-design@4.1.1/dist/css/bootstrap-material-design.min.css" integrity="sha384-wXznGJNEXNG1NFsbm0ugrLFMQPWswR3lds2VeinahP8N0zJw9VWSopbjv2x7WCvX" crossorigin="anonymous">
    </head>

    <body>
        <h1>Chat en temps r√©el</h1>

        <div>
          <input type="button" value="Envoyer" id="envoyerMessage" class="btn btn-raised btn-primary" />
          <input type="text" id="message" />
        </div>

        <div id="chat"></div>


        <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>

        <script src="/socket.io/socket.io.js"></script>
        <script>
            var socket = io.connect('http://localhost:8080');

            var pseudo = prompt('Quel est votre pseudo ?');
            socket.emit('nouvellePersonne', pseudo);

            socket.on('newMessage', function(message, pseudo) {
              $('#chat').append("<p><b>" + pseudo + "</b> : " + message + "</p>");
            })

            socket.on('nouvelArrivant', function(message) {
              alert(message);
            })

            $('#envoyerMessage').click(function () {
                socket.emit('newMessage', $('#message').val());
                $('#chat').append("<p><b>" + pseudo + "</b> : " + $('#message').val() + "</p>");
                $('#message').val('');
            })
        </script>
    </body>
</html>
